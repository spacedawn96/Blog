---
id: 3
title: 'react'
about: 'react'
excerpt: 'from react'
coverImage: '/assets/blog/preview/cover.png'
date: '2021-04-23T13:35:07.322Z'
author:
  name: spacedawn96
  picture: '/assets/blog/authors/tim.jpeg'
ogImage:
  url: '/assets/blog/hello-world/cover.png'
---

# react?
REACT는 단일 페이지 애플리케이션이다(SPA) 
## SPA란? 
1. 사용자가 브라우저에 URL을 입력한다
1. 브라우저가 URL 요청을 서버로 전송한다
1. HTML, CSS ,Javascript 같은 정적자원을 보낸다 
1. 자바스크립트 로드후 추가 axios, ajax , XHR 요청을 보내 서버에 데이터를 불러온다
1. 데이터는 JSONM XML 등의 포맷으로 전달받는다
1. SPA데이터가 전달돠면 HTML을 랜더링한다, SPA는 전달받은 데이터로 브라우저 UI를 랜더링한다
1. 로딩이끝나면 로딩중... 같은 메세지가 사라지고 랜더링이 완료된다

### 이와같은 방법이 SPA가 동작하는 방식이다 정리하자면 UI랜더링 대부분을 브라우저 상에서 해결한다

# State

 React에서 가장 중요한 것 중 하나가 상태관리이다.
 
 React의 상태는 컴포넌트의 변경 가능한 데이터 저장소이다. 이 값을 나중에 변경하면 뷰의 표현도 영향을 줄 수 있다.
 
 React는 뷰에 출력된 상태가 변경되면 변경한 상태에 관련 부분만 갱신한다 DOM에 있는 그 외 부분을은 그대로 유지한다.

 React를 사용하다 보면 부모 컴포넌트에서 자식 컴포넌트로 상태를 계속 내려 꽂는 현상을 볼 수 있다.
 
이러한 경우 불필요한 프로퍼티가 남을 수 있고  필요하면  defaultProps를 남발하며  좋지 않은 결과가 나올때도 있다, 이러한 불필요한 사용을 줄이기위해 어떻게 하면될까? 
  
먼저 컴포넌트를 나누는방법이다 어떨 때 컴포넌트를 나누는 게 좋을까? , 코드 공유 / 재사용이 필요할 때, 상태 관리가 쉽지않을때 , 성능이 저하가될때, 등 여러 가지 복합적인 이유가 있을수 있다.

즉 그냥 길어져서 나누는 거보다 이유가 있으면 나누는 게 좋다  또한 부모 컴포넌트에서 자식 컴포넌트로 state를 꽂을 때 보통 이런 방법으로 사용한다.


<div class="colorscripter-code" style="color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#242424;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;App()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">const</span>&nbsp;[music,&nbsp;setMuisc]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(<span style="color:#F0A228">''</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">const</span>&nbsp;[time,&nbsp;setTime]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(<span style="color:#D8FAAE">100</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>Music&nbsp;time<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}&nbsp;muisc<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{musc}&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{setMuisc}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>Time&nbsp;time<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{setTime}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;)</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;Time({&nbsp;time,&nbsp;onChange&nbsp;})&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>input</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#F0A228">"number"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{e&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;onChange(<span style="color:#53A3F5">Number</span>(e.target.value))}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slow</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;Muisc({&nbsp;time,&nbsp;music,&nbsp;onChange&nbsp;})&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>label&nbsp;htmlFor<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#F0A228">"muisc"</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>Music<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>label<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>input&nbsp;value<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{muisc}&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{e&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;onChange(e.target.value)}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>{muisc}<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div><br>

 이렇게 모든 state를 부모에서 자식으로 꽂는경우가 있다.
 
 이방법은 좋지않다 왜냐하면 state가 변경될때마다 모든 컴포넌트는 업데이트 될 것이다 그렇게 되면 결국 성능저하로 이어진다 어떻게 하면 해결할수있을까?

<br/><div class="colorscripter-code" style="color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#242424;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;App()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">const</span>&nbsp;[time,&nbsp;setTime]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(<span style="color:#D8FAAE">1</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>Music&nbsp;time<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>Time&nbsp;time<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{setTime}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;)</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;Time({&nbsp;time&nbsp;})&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>input</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{time}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#F0A228">"number"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{e&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;setMuisc(<span style="color:#53A3F5">Number</span>(e.target.value))}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slow</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;Muisc({&nbsp;time})&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">const</span>&nbsp;[music,&nbsp;setMuisc]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(<span style="color:#F0A228">''</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>label&nbsp;htmlFor<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#F0A228">"muisc"</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>Music<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>label<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>input&nbsp;value<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{muisc}&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{e&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;setMuisc(e.target.value)}&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>{muisc}<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div><br/>


 방법은 간단하다 state가 쓰이는곳중 가장 가까운 부모 컴포넌트에 넣으면된다 Music, Time 두 컴포넌트는 모두 time state가 필요하다.
 
즉 컴포넌트를 부모한테 올려 주는게맞다 하지만 muisc state는 Time컴포넌트한테 필요가없다 오직필요한 곳은 Muisc 컴포넌트다 이러한경우 아래로 muisc state 를 내려주면된다.

이리하면 time state가 변경될때 muisc 컴포넌트는 업데이트 되지 않아도 된다.

이러한경우 usememo usecallback 등 최적화를 해주는 함수들이있다 이러한 함수들을 쓰면 위의 효과와 똑같이 최적화 될 수있다 하지만 이런 최적화 함수를 쓰는거 자체가 연산이다.

연산은 곧 성능저하로 이어진다 그래서 이러한 함수를 남발하는건 좋지않다  이런 방법으로 사용해도 prop drilling이 생긴다 그럴경우 context를 쓰자




요즘 react는 hooks를 많이 선택하는 추세이다 react hooks는 어떻게 랜더링이될까?

# Hooks lifecycle

<div class="colorscripter-code" style="color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#242424;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#F4F0F0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">import</span>&nbsp;&nbsp;React&nbsp;&nbsp;<span style="color:#ED7ADE">from</span>&nbsp;<span style="color:#F0A228">"react"</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">export</span>&nbsp;&nbsp;<span style="color:#ED7ADE">default</span>&nbsp;&nbsp;<span style="color:#ED7ADE">function</span>&nbsp;App()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'App&nbsp;render&nbsp;시작'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">const</span>&nbsp;[showChild,&nbsp;setShowChild]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'usestate'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;<span style="color:#D8FAAE">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;React.useEffect(()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'useEffect'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'useEffect&nbsp;return&nbsp;'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'App&nbsp;render&nbsp;마지막'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>label<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>input</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#F0A228">"checkbox"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checked<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{showChild}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{e&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;setShowChild(e.target.checked)}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show&nbsp;child</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>label<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{showChild&nbsp;?&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>Child&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;:&nbsp;<span style="color:#53A3F5">null</span>}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>div<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ED7ADE">function</span>&nbsp;Child()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'Child&nbsp;start'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">const</span>&nbsp;[count,&nbsp;setCount]&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>&nbsp;React.useState(()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'Child&nbsp;usestate'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;<span style="color:#D8FAAE">0</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;})</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;React.useEffect(()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'Child&nbsp;useEffect'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#F0A228">'Child&nbsp;useEffect&nbsp;return'</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;})</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#53A3F5">console</span>.log(<span style="color:#F0A228">'Child&nbsp;end'</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ED7ADE">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span>button&nbsp;onClick<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span>{()&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;setCount(previousCount&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">=</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span>&nbsp;previousCount&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">+</span>&nbsp;<span style="color:#D8FAAE">1</span>)}<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span>button<span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FF3399"></span><span style="color:#ED7ADE">&lt;</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">/</span><span style="color:#FF3399"></span><span style="color:#ED7ADE">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;)</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div><br>


첫번째로 App이 랜더링 되면  App render 시작 -> usestate 호출 -> App render 마지막  -> useEffect 호출이 되면서 랜더링을 멈춘다 랜더를시작하고 state를 호출하고 랜더링이 끝나면 useEffect가 호출이된다.

두번째로 showChild를 누르면 다시 랜더링이 시작되고  App render 시작 -> App render 마지막  여기서 state 호출이 보이지않는다 왜냐하면 react가 이미 초기 상태값을 찾았으므로 다시 찾을필요가없다.

 즉 state는 컴포넌트가 처음 랜더링될때만 초기화됩니다  다음으로  Child가 시작이 되는데  child가 첫번째 랜더링에서 보이지 않는 이유는  리액트는 React element를 생성한다고 호출되지않습니다.
 
react는 실제로 랜더링 될때만 함수를 호출합니다  Child usestate -> Child 마지막 -> useEffect return  ->  Child useEffect -> useEffect  여기서 볼수있듯이
자식 useEffect가 먼저 실행이되고 부모  useEffect가 실행됩니다.

세번째로 숫자업데이트를 누르게되면 부모는 호출이되지않고 Child 시작 -> Child 마지막(state는 이미호출됨) -> Child useEffect return -> Child useEffect로 호출됩니다.

마지막으로 show child를 끄면  App render 시작  -> App render 마지막  -> Child useEffect return -> useEffect return  -> useEffect  
이렇게 showchild state가 false가 되면서 App이 다시 render 되고 모든 자식 useEffect가 종료되고  부모 컴포넌트도 종료가 됩니다 


 

